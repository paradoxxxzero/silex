((function(){(function(a){var b;return b={init:function(b){var c;return c=a.extend({duration:5e3,animation_duration:500,width:null,height:null},b),this.each(function(){var b,d;(d=(b=a(this)).data("silex"))||(d=a.extend({interval:null,in_transition:!1,in_grid:!1},c),b.data("silex",d));if(!b.find("img").length){d.in_transition=!0;return}b.css({position:"relative",overflow:"hidden",padding:20,borderRadius:10,backgroundColor:"#111213",width:d.width,height:d.height}),b.find("img").addClass("silexed").css({display:"block",margin:"0 auto"}).load(function(){var b;b=a(this),d.width?b.width()>=d.width&&b.width(d.width):b.parent().width()<=b.width()&&(b.parent().width(b.width()),b.parent().parent().width(b.width()));if(d.height){if(b.height()>=d.height)return b.height(d.height)}else if(b.parent().height()<=b.height())return b.parent().height(b.height())}).wrapAll(a("<div>").addClass("silex-wrapper").css({display:"table-cell",verticalAlign:"middle",height:c.height,width:c.width}).click(function(){return b.silex("next")}));if(b.find(".silexed").length===1){d.in_transition=!0;return}return b.find(".silexed").hide(),b.find(".silexed").first().show(),b.append(a("<div>").addClass("toolbar").css({position:"absolute",height:26,bottom:10,right:-100,backgroundColor:"black",borderRadius:5}).append(a("<a>").addClass("silex-icon").addClass("grid").click(function(){return b.silex("grid")}),a("<a>").addClass("silex-icon").addClass("prev").click(function(){return b.silex("prev")}),a("<a>").addClass("silex-icon").addClass("play").hide().click(function(){return b.silex("play")}),a("<a>").addClass("silex-icon").addClass("pause").click(function(){return b.silex("pause")}),a("<a>").addClass("silex-icon").addClass("next").click(function(){return b.silex("next")}))),b.find(".toolbar a").css({opacity:.5,margin:5,"float":"left",display:"block"}).hover(function(){return a(this).is(":visible")&&a(this).stop().fadeTo(250,.9)},function(){return a(this).is(":visible")&&a(this).stop().fadeTo(250,.5)}),b.hover(function(){if(d.in_grid)return;return b.find(".toolbar").stop().animate({right:15},500)},function(){return b.find(".toolbar").stop().animate({right:-100},500)})}).silex("play")},next:function(){return this.each(function(){var b,c;if((c=(b=a(this)).data("silex")).in_transition||c.in_grid)return;return c.in_transition=!0,b.find(".silexed:visible").fadeOut(c.animation_duration,function(){var d;return d=a(this).next(),d.length||(d=b.find(".silexed").first()),d.fadeIn(c.animation_duration,function(){return c.in_transition=!1})})})},prev:function(){return this.each(function(){var b,c;if((c=(b=a(this)).data("silex")).in_transition||c.in_grid)return;return c.in_transition=!0,b.find(".silexed:visible").fadeOut(c.animation_duration,function(){var d;return d=a(this).prev(),d.length||(d=b.find(".silexed").last()),d.fadeIn(c.animation_duration,function(){return c.in_transition=!1})})})},play:function(){return this.each(function(){var b,c;c=(b=a(this)).data("silex");if(!c.interval)return b.find(".play").stop().hide(),b.find(".pause").stop().show(),c.interval=setInterval(function(){return b.silex("next")},c.duration)})},pause:function(){return this.each(function(){var b,c;c=(b=a(this)).data("silex");if(c.interval)return b.find(".pause").stop().hide(),b.find(".play").stop().show(),clearInterval(c.interval),c.interval=null})},toggle:function(){return this.each(function(){var b,c;return c=(b=a(this)).data("silex"),c.interval?b.silex("pause"):b.silex("play")})},grid:function(){return this.each(function(){var b,c,d,e,f,g,h,i;e=(b=a(this)).data("silex");if(e.in_grid)return;e.in_grid=!0,b.find(".toolbar").stop().animate({right:-100},500);if((c=b.find(".thumbs")).length){c.animate({top:0},500);return}return g=b.find(".silexed").length,d=Math.ceil(Math.sqrt(g)),h=Math.ceil(g/d),i={height:2*b.height()/3,width:3*b.width()/4,padding:15},f={padding:6},f.width=f.height=Math.min(i.width/d-2*f.padding,i.height/h-2*f.padding),i.width=(f.width+2*f.padding)*d,i.height=(f.height+2*f.padding)*h,b.append(a("<div>").addClass("thumbs").css({position:"absolute",top:-i.height-2*i.padding,borderBottomLeftRadius:20,borderBottomRightRadius:20,left:(b.width()-i.width)/2,width:i.width,height:i.height,backgroundColor:a.support.opacity?"rgba(0, 0, 0, 0.9)":"black",padding:i.padding,display:"block"}).append(b.find(".silexed").map(function(){var c;return c=a(this),a("<img>").attr("src",c.attr("src")).css({"float":"left",width:f.width,height:f.height,padding:f.padding,opacity:.7}).hover(function(){return a(this).stop().fadeTo(250,1)},function(){return a(this).stop().fadeTo(250,.7)}).click(function(){return e.in_transition=!0,e.in_grid=!1,b.find(".silexed:visible").fadeOut(e.animation_duration,function(){return c.fadeIn(e.animation_duration,function(){return e.in_transition=!1})}),b.find(".thumbs").stop().animate({top:-i.height-2*i.padding},500),b.find(".toolbar").stop().animate({right:15},500)}).get(0)})).animate({top:0},500))})}},a.fn.silex=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):typeof c=="object"||!c?b.init.apply(this,arguments):a.error("Method "+c+" does not exist on jQuery.silex")}})(jQuery)})).call(this)